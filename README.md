# üì± CrashCurse iOS App

–ú–æ–±—ñ–ª—å–Ω–∏–π AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è iOS –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –∑ –±–∞–≥–∞—Ç–æ–∞–≥–µ–Ω—Ç–Ω–∏–º backend —Å–∏—Å—Ç–µ–º–æ—é. –ü—ñ–¥—Ç—Ä–∏–º—É—î —á–∞—Ç –∑ AI, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π, –ø–æ–≥–æ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏ —Ç–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é.

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- **ü§ñ AI Chat**: –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π —á–∞—Ç –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ä—ñ–∑–Ω–∏—Ö –∞–≥–µ–Ω—Ç—ñ–≤
- **üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ–π —Ç–∞ –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å —á–µ—Ä–µ–∑ –ø—Ä–∏—Ä–æ–¥–Ω—É –º–æ–≤—É
- **üå§Ô∏è –ü–æ–≥–æ–¥–∞**: –ê–∫—Ç—É–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–æ–≥–æ–¥—É –≤ –º—ñ—Å—Ç–∞—Ö –£–∫—Ä–∞—ó–Ω–∏
- **üó∫Ô∏è –ù–∞–≤—ñ–≥–∞—Ü—ñ—è**: –î–æ–ø–æ–º–æ–≥–∞ –∑ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—î—é —Ç–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º
- **üîí –ë–µ–∑–ø–µ–∫–∞**: API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ HTTPS –∑'—î–¥–Ω–∞–Ω–Ω—è
- **üì± Native iOS**: SwiftUI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é iOS 15+

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
```
CrashCurseApp/
‚îú‚îÄ‚îÄ CrashCurseApp/                 # üì± –û—Å–Ω–æ–≤–Ω–∏–π iOS –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ CrashCurseApp/            # üìÇ Core —Ñ–∞–π–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoreServices/         # üîß –°–µ—Ä–≤—ñ—Å–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkService.swift  # üåê –ú–µ—Ä–µ–∂–µ–≤–∏–π —à–∞—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Models/               # üìä –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Assets.xcassets/          # üé® –†–µ—Å—É—Ä—Å–∏
‚îÇ   ‚îî‚îÄ‚îÄ CrashCurseApp.xcdatamodeld/  # üìä Core Data
‚îú‚îÄ‚îÄ CrashCurseApp.xcodeproj/      # üîß Xcode –ø—Ä–æ–µ–∫—Ç
‚îú‚îÄ‚îÄ CrashCurseAppTests/           # üß™ Unit —Ç–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ CrashCurseAppUITests/         # üß™ UI —Ç–µ—Å—Ç–∏
```

### üåê Backend —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

**Backend Repository**: [crashcurse-backend](https://github.com/agents052025/crashcurse-backend)
**Production API**: `https://mobile.labai.ws`
**Local Development**: `http://localhost:8000`

### üîß NetworkService

–û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ backend API:
- API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –∑–∞–ø–∏—Ç—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö endpoint'—ñ–≤ (chat, calendar, weather, navigation)
- Error handling —Ç–∞ retry –ª–æ–≥—ñ–∫–∞
- Async/await –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- **Xcode 14.0+**
- **iOS 15.0+**
- **macOS 12.0+** (–¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone https://github.com/agents052025/assistant_ios.git
cd assistant_ios
```

### 2. –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤ Xcode
```bash
open CrashCurseApp.xcodeproj
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è backend URL

–£ —Ñ–∞–π–ª—ñ `CrashCurseApp/CoreServices/NetworkService.swift`:
```swift
// –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
private let backendURL = "http://localhost:8000"

// –î–ª—è production
private let backendURL = "https://mobile.labai.ws"
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞

–£ `NetworkService.swift` –∑–º—ñ–Ω—ñ—Ç—å API –∫–ª—é—á:
```swift
private let apiKey = "your_api_key_here"
```

### 5. –ó–∞–ø—É—Å–∫ backend (–ª–æ–∫–∞–ª—å–Ω–æ)

–ö–ª–æ–Ω—É–π—Ç–µ —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å backend:
```bash
git clone https://github.com/agents052025/crashcurse-backend.git
cd crashcurse-backend
./run.sh
```

### 6. –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ iOS –¥–æ–¥–∞—Ç–∫—É

1. –í–∏–±–µ—Ä—ñ—Ç—å target: **CrashCurseApp**
2. –í–∏–±–µ—Ä—ñ—Ç—å simulator –∞–±–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **‚åò + R** –¥–ª—è –∑–∞–ø—É—Å–∫—É

## üîß –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Info.plist –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ (HTTP –∑'—î–¥–Ω–∞–Ω–Ω—è):
```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

### –ú–µ—Ä–µ–∂–µ–≤—ñ –¥–æ–∑–≤–æ–ª–∏

–î–æ–¥–∞–π—Ç–µ –≤ `Info.plist` –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:
```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSExceptionDomains</key>
    <dict>
        <key>mobile.labai.ws</key>
        <dict>
            <key>NSExceptionRequiresForwardSecrecy</key>
            <false/>
            <key>NSExceptionMinimumTLSVersion</key>
            <string>TLSv1.0</string>
            <key>NSThirdPartyExceptionRequiresForwardSecrecy</key>
            <false/>
        </dict>
    </dict>
</dict>
```

## üåê API Integration

### –û—Å–Ω–æ–≤–Ω—ñ endpoint'–∏

```swift
// –ß–∞—Ç –∑ AI
POST /api/v1/chat/send
Headers: X-API-KEY: supersecretapikey
Body: {"message": "–Ø–∫–∞ –ø–æ–≥–æ–¥–∞ –≤ –ö–∏—î–≤—ñ?", "user_id": "ios_user"}

// –Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É
GET /api/v1/chat/history/ios_user
Headers: X-API-KEY: supersecretapikey

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–¥—ñ—ó
POST /api/v1/calendar/events
Headers: X-API-KEY: supersecretapikey
Body: {"title": "–ó—É—Å—Ç—Ä—ñ—á", "start_date": "2024-01-01T09:00:00Z"}
```

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è NetworkService

```swift
import Combine

class ChatViewModel: ObservableObject {
    @Published var messages: [ChatMessage] = []
    private let networkService = NetworkService()
    private var cancellables = Set<AnyCancellable>()
    
    func sendMessage(_ text: String) {
        networkService.sendMessage(text)
            .receive(on: DispatchQueue.main)
            .sink(
                receiveCompletion: { completion in
                    if case .failure(let error) = completion {
                        print("Error: \\(error)")
                    }
                },
                receiveValue: { response in
                    self.messages.append(ChatMessage(
                        text: response.message,
                        isUser: false
                    ))
                }
            )
            .store(in: &cancellables)
    }
}
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Unit —Ç–µ—Å—Ç–∏
```bash
# –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç—ñ–≤
‚åò + U (–≤ Xcode)
```

### UI —Ç–µ—Å—Ç–∏
```bash
# –ó–∞–ø—É—Å–∫ UI —Ç–µ—Å—Ç—ñ–≤
‚åò + Ctrl + U (–≤ Xcode)
```

### Backend –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
```swift
// –¢–µ—Å—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ backend
func testBackendConnection() {
    let expectation = expectation(description: "Backend connection")
    
    networkService.healthCheck()
        .sink(
            receiveCompletion: { _ in },
            receiveValue: { isHealthy in
                XCTAssertTrue(isHealthy)
                expectation.fulfill()
            }
        )
        .store(in: &cancellables)
    
    waitForExpectations(timeout: 5.0)
}
```

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏
- **MVVM**: Model-View-ViewModel –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- **Combine**: Reactive programming –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- **SwiftUI**: –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∏–π UI framework
- **Core Data**: –õ–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

**NetworkService**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –∫–ª–∞—Å –¥–ª—è API –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó
**ChatViewModel**: ViewModel –¥–ª—è —á–∞—Ç —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ  
**EventManager**: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏–º–∏ –ø–æ–¥—ñ—è–º–∏
**WeatherService**: –°–µ—Ä–≤—ñ—Å –ø–æ–≥–æ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π endpoint –≤ backend
2. –î–æ–¥–∞–π—Ç–µ –º–µ—Ç–æ–¥ –≤ `NetworkService.swift`
3. –°—Ç–≤–æ—Ä—ñ—Ç—å ViewModel –¥–ª—è UI –ª–æ–≥—ñ–∫–∏
4. –î–æ–¥–∞–π—Ç–µ SwiftUI View –¥–ª—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

## üìä Performance

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –º–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏
- –ö–µ—à—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π API
- Lazy loading –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤
- Memory management –∑ weak references

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Instruments –¥–ª—è profiling
- Network profiling –¥–ª—è API –∑–∞–ø–∏—Ç—ñ–≤
- Memory leaks detection

## üêû Troubleshooting

### –ü–æ–º–∏–ª–∫–∏ –º–µ—Ä–µ–∂—ñ
```
‚ùå "Could not connect to backend"
‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –ø—Ä–∞—Ü—é—î backend –Ω–∞ localhost:8000
‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API –∫–ª—é—á –≤ NetworkService.swift
```

### Build –ø–æ–º–∏–ª–∫–∏
```
‚ùå "Missing API key"
‚úÖ –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π API –∫–ª—é—á
‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ backend URL –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
```

### Simulator –ø—Ä–æ–±–ª–µ–º–∏
```
‚ùå "App transport security policy"
‚úÖ –î–æ–¥–∞–π—Ç–µ NSAllowsArbitraryLoads –≤ Info.plist –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
```

## üöÄ Deployment

### App Store –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –ó–º—ñ–Ω—ñ—Ç—å –Ω–∞ production URL: `https://mobile.labai.ws`
2. –í–∏–¥–∞–ª—ñ—Ç—å `NSAllowsArbitraryLoads` –∑ Info.plist
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ app icons
4. –î–æ–¥–∞–π—Ç–µ privacy policy URLs

### TestFlight
1. Archive –ø—Ä–æ–µ–∫—Ç (‚åò + Shift + R)
2. Upload –¥–æ App Store Connect
3. –î–æ–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–µ—Ä—ñ–≤
4. –†–æ–∑–ø–æ–≤—Å—é–¥—å—Ç–µ build

## ü§ù Contribution

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∑–º—ñ–Ω–∏ (`git commit -m 'Add amazing feature'`)
4. Push –¥–æ branch (`git push origin feature/amazing-feature`)
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –¥–µ—Ç–∞–ª—ñ –≤ —Ñ–∞–π–ª—ñ LICENSE

## üîó –ü–æ–≤'—è–∑–∞–Ω—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó

- **Backend**: [crashcurse-backend](https://github.com/agents052025/crashcurse-backend)
- **API Documentation**: https://mobile.labai.ws/docs

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

- **Issues**: GitHub Issues
- **Backend Health**: https://mobile.labai.ws/health
- **API Docs**: https://mobile.labai.ws/docs

---

**üì± –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –Ω–∞ Swift —ñ SwiftUI** 